{% extends 'base.html' %}
{% load crispy_forms_tags %}

{%  block content %}

<section class="p-4">
 <div class="container">
  <div class="row justify-content-center">
    <div class="col-md-7 col-sm-12">
      {% for post in posts %}
       <div class="card my-card bg-light g-5 mb-3 position-relative"> 
         <div class="card-title m-2">
           <div class="d-flex d-flex justify-content-between mb-1">
              <div>
                <img class="img img-fluid mt-3" src="{{ post.user_image.url }}" alt="user-image">
                 <span class="h5 my-4">{{ post.author }}</span>
              </div>
              <button class="btn"><i class="fas fa-ellipsis-v"></i></button>
           </div>
         </div>
          <img src="{{ post.get_post_image }}" class="img-fluid me-sm-0 m-lg-0 p-0 rounded" alt="...">
            <div class="mt-3 text-secondary">
                <div class="d-flex justify-content-evenly">
                    <div>
                       <button id="like" class="btn"><i class="fa fa-thumbs-up h4 text-secondary" aria-hidden="true"></i></button>
                       <span class="h5 mt-2">1</span>
                     </div>
                     <div>
                       <button id="deslike" class="btn"><i class="fa fa-thumbs-down h4 text-secondary" aria-hidden="true"></i></button>
                       <span class="h5 mt-2">{{ post.likes.all.count }}</span>
                     </div>
                     <div>
                       <button class="btn border-none"><i class="fa h4 fa-comment text-secondary" aria-hidden="true"></i></button>
                       <span class="h5">28</span>
                     </div>
                    <div>
                     <button class="btn"><i class="far h4 text-secondary fa-paper-plane px-5"></i></button>
                    </div>
                </div>
              <div class="like-caption px-2">
                 <span class="bold">1,000 likes</span>
                </div>
                <span class="bold px-4">{{ post.caption }}</span>
            </div>
            <div class="mt-0 mb-2">
                <div class="comments text-secondary">
                  {% for comment in comments %}
                    <p class="text-dark">{{ comment.author }}:  {{ comment }} 
                       <span class="text-secondary">{{ comment.commented_on|timesince }} ago</span>
                    </p>
                  {% endfor %}
                </div>
                 <a class="link text-decoration-none text-dark px-2" href="#">all comments 29..</a>
            </div>
          <a href="{% url 'post-detail' post.pk %}" class="stretched-link"></a>
         </div>
      {% endfor %}
     </div>
   </div>
  </div>
</section>

{% endblock content %}